# 2. 软件测试面试问题 (下）

***

**1. 发现bug，如何定位是客户端还是服务端的问题？**

定位Bug归属是测试工程师的基本功。以下是一些常用的定位方法：

- **抓包分析 (最常用)**：
  - **工具**： 使用 Fiddler, Charles, Wireshark 或浏览器开发者工具 (Network tab) 抓取客户端和服务端之间的网络请求。
  - **分析**：
    - **请求是否发送**：客户端是否成功发起了预期的请求？
    - **请求参数**：客户端发送的请求数据（URL、请求头、请求体）是否正确、符合接口规范？
    - **响应状态码**：服务端返回的状态码是什么（2xx 成功, 4xx 客户端错误, 5xx 服务端错误）？
    - **响应数据**：服务端返回的数据内容是否正确、符合预期？
    - **响应时间**：请求是否超时？服务端处理是否过慢？
  - **判断**：
    - 如果请求未发出或请求参数错误，通常是 **客户端** 问题。
    - 如果请求参数正确，但响应状态码是 4xx 或 5xx，或响应数据错误，通常是 **服务端** 问题。
    - 如果请求参数正确，响应数据也正确，但客户端展示错误，通常是 **客户端** 问题。
- **查看日志**：
  - **客户端日志**：查看App或浏览器控制台的日志，是否有报错信息、异常堆栈。
  - **服务端日志**：联系开发人员或通过日志系统（如 ELK, Splunk）查看服务端的应用日志、错误日志，是否有异常信息、详细的错误堆栈。
- **模拟请求**：
  - 使用 Postman, curl 等工具，模拟客户端发送相同的请求到服务端。
  - 如果模拟请求能复现问题（得到错误的响应），则很可能是 **服务端** 问题。
  - 如果模拟请求无法复现问题（得到正确的响应），则问题可能出在 **客户端** 处理响应数据或发送请求的逻辑上。
- **不同环境/客户端验证**：
  - **更换浏览器/设备**：在不同的浏览器（Chrome, Firefox）或设备（iOS, Android）上尝试复现问题。如果只在特定客户端出现，可能是 **客户端** 兼容性问题。
  - **更换网络环境**：切换网络（WiFi, 4G/5G）尝试。网络问题也可能导致异常。
  - **访问不同环境的服务端**：如果条件允许，连接测试环境或预发布环境的服务端，看问题是否依然存在，有助于判断是否是特定环境配置或数据导致的服务端问题。
- **代码检查 (如果可能)**：
  - 如果对代码有一定了解，可以查看客户端渲染逻辑或服务端处理逻辑相关的代码片段，辅助判断。
- **分段排查**：
  - 如果涉及到多个服务调用链，可以逐一排查链路上每个服务的输入输出，缩小问题范围。

**总结：** 定位过程通常是结合多种方法，从网络请求入手，辅以日志分析和模拟请求，逐步缩小范围，最终确定问题根源。

***

**2. Web测试的主要内容有哪些？**

Web测试关注用户通过浏览器访问应用的各个方面：

- **功能测试 (Functionality)**：
  - 链接测试：死链、内部链接、外部链接、锚点链接。
  - 表单测试：数据提交、输入验证（合法性、边界值、必填项）、默认值、提示信息。
  - 业务逻辑测试：核心功能是否按需求文档实现，流程是否正确。
  - Cookies/Session 测试：登录状态、用户偏好设置、购物车等是否正常工作。
  - 权限测试：不同用户角色访问权限控制是否正确。
- **用户界面/用户体验测试 (UI/UX)**：
  - 页面布局：元素对齐、排版、是否存在重叠或错位。
  - 视觉效果：颜色、字体、图片、图标显示是否正确、美观。
  - 导航：菜单、面包屑导航是否清晰易用。
  - 响应式设计：在不同分辨率下页面布局是否自适应，元素是否可用。
  - 易用性：操作流程是否符合用户习惯，是否简单直观。
- **兼容性测试 (Compatibility)**：
  - **浏览器兼容性**：Chrome, Firefox, Safari, Edge 等主流浏览器及其不同版本。
  - **操作系统兼容性**：Windows, macOS, Linux 等。
  - **分辨率兼容性**：不同屏幕分辨率下的显示效果。
- **性能测试 (Performance)**：
  - **前端性能**：页面加载速度（白屏时间、首屏时间、完全加载时间）、资源大小、请求数量、浏览器渲染性能。
  - **后端性能**：服务器响应时间、吞吐量 (TPS/QPS)、并发用户数、资源利用率（CPU, 内存, IO）。
- **安全性测试 (Security)**：
  - 输入验证：SQL注入、XSS跨站脚本攻击。
  - 身份认证与授权：登录暴力破解、越权访问。
  - 数据传输：敏感数据是否加密（HTTPS）。
  - Session/Cookie 安全：防劫持、固定。
  - 文件上传漏洞。
- **可用性测试 (Usability)**：
  - 更侧重于用户完成任务的效率、满意度和学习成本。
- **可访问性测试 (Accessibility, A11y)**：
  - 确保残障人士（如视障、听障用户）也能使用网站，例如支持屏幕阅读器、键盘导航等。
- **(可选) SEO 测试**：
  - 检查 `robots.txt`, `sitemap.xml`, Meta 标签, URL 结构等是否有利于搜索引擎优化。

***

**3. App测试的主要内容有哪些？**

App测试除了包含Web测试的部分内容外，还需关注移动设备的特性：

- **功能测试 (Functionality)**：
  - 核心业务逻辑、流程是否正确实现。
  - 与服务器的数据交互是否正常。
  - 本地数据存储、缓存功能是否正常。
  - 与其他App的交互（如分享、跳转）。
- **用户界面/用户体验测试 (UI/UX)**：
  - 界面布局在不同尺寸、分辨率屏幕上的适配性。
  - 控件样式、交互效果是否符合平台规范 (iOS/Android)。
  - 手势操作（滑动、缩放、点击）是否流畅、符合预期。
  - 横竖屏切换显示是否正常。
  - 易用性，操作是否便捷。
- **兼容性测试 (Compatibility)**：
  - **操作系统版本兼容性**：主流的 iOS 和 Android 版本。
  - **设备兼容性**：不同品牌、型号、屏幕尺寸、分辨率的手机/平板。
  - **网络兼容性**：不同网络环境（2G, 3G, 4G, 5G, WiFi, 无网络）下的表现。
- **性能测试 (Performance)**：
  - **启动性能**：冷启动、热启动时间。
  - **资源消耗**：CPU、内存、电量、数据流量消耗。
  - **流畅度**：页面滑动、动画效果是否卡顿。
  - **响应时间**：本地操作、网络请求的响应速度。
- **安装/卸载/更新测试 (Installation/Uninstallation/Update)**：
  - App 是否能正常安装、卸载。
  - 覆盖安装、升级后数据是否保留、功能是否正常。
  - 安装过程是否可被中断及恢复。
- **中断测试 (Interruption)**：
  - 测试在特定场景下被打断后的表现：
    - 来电、短信、通知。
    - 低电量提醒、充电状态切换。
    - 切换到其他App再切回。
    - 锁屏/解锁。
    - 网络切换或中断。
- **权限测试 (Permission)**：
  - App 请求的权限是否合理。
  - 用户授权/拒绝权限后，App 的功能表现是否符合预期。
  - 权限变更后 App 是否能正常处理。
- **安全性测试 (Security)**：
  - 数据本地存储安全（是否加密）。
  - 网络传输安全（HTTPS）。
  - 身份认证、防止反编译、代码混淆。
  - 敏感信息（如密码）是否明文显示或存储。
- **离线/弱网测试**：
  - 无网络时 App 的表现（是否友好提示、是否有离线功能）。
  - 弱网环境下数据加载、操作的响应情况和超时处理。

***

**4. 什么是接口测试，有哪些检查点？**

- **什么是接口测试？**

  接口测试（API Testing）是测试系统组件之间交互的一种软件测试。它主要用于检测**服务端**提供的接口（API）能否在不同情况下正常工作，验证接口的功能、性能、安全性是否符合预期。它不通过UI，而是直接构造请求数据，调用接口，然后验证返回结果的正确性。
- **接口测试的检查点：**
  - **功能正确性 (Functionality)**：
    - **正常场景**：输入合法的参数，是否返回预期的、正确的数据。
    - **异常场景**：
      - 输入非法的参数（类型错误、格式错误、长度超限/过短）。
      - 输入边界值参数（最大值、最小值、临界值）。
      - 输入空值、null、特殊字符。
      - 输入非必填参数（验证可选性）。
      - 输入不存在或无权限的数据标识。
    - **业务逻辑**：接口是否正确实现了预期的业务规则（如：添加商品后库存是否减少）。
  - **响应数据校验 (Response Validation)**：
    - **状态码 (Status Code)**：HTTP状态码是否符合预期（如成功200，客户端错误4xx，服务端错误5xx）。
    - **响应体格式 (Data Format)**：返回的数据格式是否正确（如 JSON, XML）。
    - **响应体内容 (Data Content)**：返回的数据字段、数值是否准确、完整。
    - **响应头 (Headers)**：Content-Type, Set-Cookie 等响应头信息是否正确。
  - **性能表现 (Performance)**：
    - **响应时间 (Response Time)**：接口返回结果所需的时间是否在可接受范围内。
    - **并发性能 (Concurrency)**：模拟多用户同时请求时，接口的处理能力（TPS/QPS）和稳定性。
    - **资源消耗**：接口调用时服务端的CPU、内存等资源消耗情况（通常结合性能测试工具）。
  - **安全性 (Security)**：
    - **身份认证 (Authentication)**：是否需要有效的Token、密钥或其他凭证才能访问。无效凭证是否被拒绝。
    - **授权/权限控制 (Authorization)**：不同用户/角色调用接口时，是否能正确访问其有权限的数据和操作，越权请求是否被拒绝。
    - **数据安全**：敏感数据在传输和返回时是否加密。是否有潜在的注入风险（虽然主要在服务端实现层面防御，但接口测试可辅助验证）。
  - **错误处理 (Error Handling)**：
    - 发生错误时（如参数错误、依赖服务异常、内部错误），接口是否返回规范的、明确的错误码和错误信息。

***

**5. 举例讲讲工作中用到的等价类？**

**等价类划分法 (Equivalence Partitioning)** 是一种常用的黑盒测试用例设计方法。它将程序的输入域划分为若干个子集（称为等价类），并假设每个等价类中的任一输入数据对于揭露程序中的错误都是等效的。这样就可以从每个等价类中选取少量代表性数据作为测试用例，从而大大减少测试用例的数量。

**等价类分为有效等价类和无效等价类：**

- **有效等价类**：符合程序规格说明、合理、有意义的输入数据集合。
- **无效等价类**：不符合程序规格说明、无意义、非法的输入数据集合。

**工作中的例子：**

假设我们测试一个网站的用户注册功能，其中有一个 **“年龄” 输入框**，要求输入的年龄必须是 **18 到 60 岁之间的整数**。

我们可以使用等价类划分法来设计测试用例：

1. **确定输入要求**：年龄是 18 到 60 之间的整数。
2. **划分有效等价类**：
   - **\[有效等价类 1]**：年龄在 18 到 60 之间的整数。
     - *测试用例*：选取一个代表值，如 `30`。
3. **划分无效等价类**：
   - **\[无效等价类 1]**：小于 18 的整数。
     - *测试用例*：选取一个代表值，如 `17`。
   - **\[无效等价类 2]**：大于 60 的整数。
     - *测试用例*：选取一个代表值，如 `61`。
   - **\[无效等价类 3]**：非整数（小数）。
     - *测试用例*：选取一个代表值，如 `25.5`。
   - **\[无效等价类 4]**：非数字（字符串）。
     - *测试用例*：选取一个代表值，如 `"abc"`。
   - **\[无效等价类 5]**：空值。
     - *测试用例*：输入为空。
   - **\[无效等价类 6]**：包含特殊字符。
     - *测试用例*：选取一个代表值，如 `@#$`。

**测试执行：**

我们会用上面选取的每个测试用例（30, 17, 61, 25.5, "abc", "", "@#\$") 去测试年龄输入框：

- 对于有效等价类用例 `30`，预期结果是：输入成功，允许继续注册。
- 对于所有无效等价类用例，预期结果是：系统给出相应的错误提示（如“年龄必须在18-60岁之间”，“请输入有效的整数”等），并且不允许继续注册。

**补充：** 通常等价类会和边界值分析法结合使用。对于上面的例子，边界值会测试 `17, 18, 19` 和 `59, 60, 61`。

***

**6. 如何测试电梯？**

测试电梯是一个经典的开放性问题，旨在考察测试思维的广度、深度和系统性。需要从不同维度进行考虑：

- **功能测试 (基本操作)**：
  - **楼层选择**：
    - 按单个楼层按钮，电梯是否能到达指定楼层。
    - 按多个楼层按钮（顺向、逆向），电梯是否按规则停靠。
    - 按当前楼层按钮，电梯是否无响应。
    - 按不存在的楼层（如地下室按钮但无地下室）。
  - **开关门**：
    - 按开门按钮，门是否打开并保持（未运行时、运行时）。
    - 按关门按钮，门是否关闭（未运行时、运行时）。
    - 关门过程中按开门按钮，门是否重新打开。
    - 门完全关闭后按开门按钮。
  - **运行方向**：
    - 上行/下行按钮是否点亮，电梯是否按指示方向运行。
    - 电梯内楼层指示灯、方向指示灯是否正确。
  - **特殊按钮**：
    - 警铃/紧急呼叫按钮是否能正常工作，是否能接通。
    - 消防模式按钮（如果有）是否能激活消防状态。
- **安全性测试 (Safety)**：
  - **障碍物检测**：关门过程中有障碍物（模拟手或物体），门是否能自动打开。多次阻挡呢？
  - **超载测试**：超过额定载重，电梯是否报警且不开动。临界载重呢？
  - **紧急停止**：按下急停按钮（如果有），电梯是否能立即停止。
  - **断电测试**：模拟突然断电，电梯是否有备用电源支持（如自动平层开门、应急照明、通话）。断电恢复后电梯状态？
  - **速度限制**：电梯运行速度是否在安全范围内，是否有超速保护。
  - **门锁联动**：电梯门未完全关闭时，是否无法启动运行。运行时门是否无法打开。
  - **平层准确度**：电梯停止时是否与楼层地面平齐。
- **性能测试 (Performance)**：
  - **运行效率**：从底层到顶层的运行时间。开关门时间。
  - **最大吞吐量**：高峰期（模拟多人同时使用）电梯的调度算法、等待时间、运载效率。
  - **负载运行**：满载情况下的运行速度、平稳性。
  - **长时间运行**：连续无故障运行时间。
- **可用性/易用性测试 (Usability)**：
  - 按钮标识是否清晰易懂。
  - 楼层显示、运行方向指示是否明确
